---
title: 正则表达式不可能那么简单<1>——这可能是最简单的入门篇
date: 2017-04-16 17:00:55
tags:
categories: 正则
---

正则表达式，很强大，又很难学， 更难的是熟记正则表达式的一些规则。经常使用才能熟能生巧。

正则表达式网络上的教程铺天盖地，但这可能是最简单的一片正则表达式的入门。

不信，我们开始吧。

<!--more-->

## 简介

什么是正则表达式？正则表达式是一种规则，制定一定的规则可以用来**匹配**一段文本中我们想要的部分。

当然辣，除了**匹配**，也能够用来**替换**。

## 构成元素

正则表达式的基本构成元素分为三类：

1. 元字符
2. 量词
3. 字符类

元字符是正则表达式中基本元素，有点类似英文中的单词。

量词是用来修饰元字符的重复次数。

而字符类是用来限定**单个字符**的范围。可以说，字符类是在元字符的基础，再次缩写匹配的范围，使得匹配更为精准。

**所有的正则表达式都是以斜线``/`开头,`/`结尾的。**这是固定不变的。

接下来一一看三个组成元素有哪些内容吧！

### 元字符

1. `\d`匹配一个数字(digital)。如果想要匹配两个数字，则要使用`\d\d`
2. `\w` 匹配一个字母或者是数字。即包括a-z 和A-Z 以及0-9。
3. `\s`匹配一个空白符。空白符不仅包括屏幕上显示的空格字符，还包括制表符、换行和回车。
4. `.`匹配除换行符以外的任意一个字符。比如数字、字母、制表符、回车、空格。
5. `^`指定必须从一个文本的开始位置进行匹配。
6. `$`指定匹配在哪里结束。一般和`^`一起使用。

举个例子：

`/^\w\w\w\s\d\d\d$/`能匹配`hew 123`，但是却不能匹配`hew 123ro`,因为`$`指定了匹配到文本结尾是三个数字。

换句话说，同时使用了`^` `$`两个元字符能够总体上确定了匹配文本的开头和结尾的格式。

### 量词

量词很好理解，一个苹果，两个苹果。一个和两个都是修饰苹果的量词。

同样这里，量词用来修饰元字符，表示匹配元字符的个数。记住**前面的四个元字符都只能匹配一个字符**.

唯一区别是，**量词必须跟在元字符的后面**。

1. `{min,max}` 前面的元字符可以重复次数的范围。如果花括号中只有一个数字，表示前面元字符必须重复的次数。
2. `+`前面的元字符必须至少重复一次。
3. `？`前面的元字符最多只能出现一次。
4. `*`前面的元字符随意，可以出现一次或者多次或者根本不出现

举个例子：

上面的`/^\w\w\w\s\d\d\d$/`就可以写成`/^\w{3}\s\d{3}$`

so easy!

最后需要注意一点是：如果同时使用了`{}`和其他的量词，需要用小括号把前面部分包围起来。

比如`/^(\d{4})?$/`

注意，这里有一个很有用的概念：**用括号包围起来的部分，我们称作为一个组**。

这在后面的用正则表达式来替换文本中会用到。

### 字符类

字符类是用来限定**单个字符**的范围。可以说，字符类是在元字符的基础，再次缩写匹配的范围，使得匹配更为精准。

这句话在一开始就说明了，现在再次重复一遍。

字符类是在元字符的基础上，缩小匹配的范围。

**字符类和元字符一样，是可以单独出现的**。

1. `[0-2]`匹配一定范围的单个数字。这里只会匹配0或者1或者2。
2. `[A-D]`匹配一定范围的单个字母。这里只会匹配A或者B或者C或者D。
3. `[^b-f]`匹配**一定范围之外**的单个字母。这里的`^`并不是元字符，而是表示除……之外的字符。



### 对保留字符转义

什么是保留字符，很简单，就是正则表达式中有特定含义的字符，这些并不多，包括了：`.` `?` `+` `[]` `()` `^` `$` `|` `\` `/` `*`

| 保留字符 | 说明                                       |
| ---- | ---------------------------------------- |
| $    | 匹配输入字符串的结尾位置。如果设置了 RegExp 对象的 Multiline 属性，则 $ 也匹配 ‘\n' 或 ‘\r'。要匹配$ 字符本身，请使用 \$。 |
| ( )  | 标记一个子表达式的开始和结束位置。子表达式可以获取供以后使用。要匹配这些字符，请使用 \( 和 \)。 |
| *    | 匹配前面的子表达式零次或多次。要匹配 * 字符，请使用 \*。          |
| +    | 匹配前面的子表达式一次或多次。要匹配 + 字符，请使用 \+。          |
| .    | 匹配除换行符 \n之外的任何单字符。要匹配 .，请使用 \。           |
| [ ]  | 标记一个中括号表达式的开始。要匹配 [，请使用 \[。              |
| ?    | 匹配前面的子表达式零次或一次，或指明一个非贪婪限定符。要匹配 ? 字符，请使用 \?。 |
| \    | 将下一个字符标记为或特殊字符、或原义字符、或向后引用、或八进制转义符。例如， ‘n' 匹配字符‘n'。'\n' 匹配换行符。序列 ‘\\' 匹配 “\”，而 ‘\(' 则匹配 “(”。 |
| ^    | 匹配输入字符串的开始位置，除非在方括号表达式中使用，此时它表示不接受该字符集合。要匹配 ^ 字符本身，请使用 \^。 |
| { }  | 标记限定符表达式的开始。要匹配 {，请使用 \{。                |
| \|   | 指明两项之间的一个选择。要匹配 \|，请使用 \|。               |

举个例子：

我需要匹配(555)636-4652这样的电话号码的格式。想一想如何写正则表达式。

看起来很简单，(三个数字) 和`-`符号和四个数字，然后在开始和末尾加上`^` `$`表示从串开始匹配到串的结束位置。

即`/^(\d{3})\d{3}-\d{4}$/`

但是这是错误的！原因在于`()` 是保留字符，**在量词中，我们使用`()`表示组的意义**。所以，必须进行转义。

即`/^\(\d{3}\)\d{3}-\d{4}$/`