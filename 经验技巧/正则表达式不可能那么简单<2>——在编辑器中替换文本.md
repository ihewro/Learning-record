---
title: 正则表达式不可能那么简单<2>——在编辑器中替换文本
date: 2017-04-18 21:20:39
tags:
categories: 正则
---

参考文章：[浅析正则表达式-替换原则](http://www.cnblogs.com/dwlsxj/p/RegexReplace.html)

注意：本文的测试图片是在[正则表达式测试器]()中进行的，主流编辑器中的规则应该是类似的！

（逃~

<!--more-->

## 引导

对于初学者，正则表达式常常用在编辑器中的**查找**和**替换**两个功能。

查找功能入门篇已经初步介绍了。但是我们查找出来的内容，如何替换成我们想要的内容呢？ 

比如：我有一大篇文章中，如下

```text
I HAVE A_DREAM@SS

I HAVE A_GOOD_DREAM@S_T

I HAVE A GOOD DREAM@S
```

想要**查找**这样的字符串：

```text
A_DREAM@SS
A_GOOD_DREAM@S_T
A GOOD DREAM@S
```

并要 **替换** 成这样的文本串：

```text
SS@A_DREAM
S_T@A_GOOD_DREAM
S@DREAM
```

先要进行**查找**，直接写正则表达式。

这个表达式很简单，即`/\w+@\w+/`

但是如何把第二组的`(\w+)`调到第一组`(\w+)`的前面呢？

要是给前面那一部分取个名字，后面那个部分也取个名字，我就可以使唤他们了！

所以，这里用到了**分组**。

在入门篇中，已经说了，**分组即是用括号包围起来**。

**查找的表达式 **改成这样：`\(\w+)@(\w+)\`。

这样根据括号从左到右的顺序，依次从1开始命名，第一个括号就是第一组（#group1），第二个括号的内容就是第二组（#group2）。

分完组了，用`$1`就代表第一组，`$2`就代表第二组。就能让他们听话了。

**替换表达式**就是： `$2@$1`。

是不是很简单。

![regex1](https://cdn.ihewro.com/img/regex1.png)

如上图所示。

这就是第一种替换的方法：**使用括号分组，使用$number的方法调用每个组的匹配的内容**。

## 给一个组命名

第一种方法中，`$1`和`$2`都是自动分配的组名。但是组不高兴了，他想要自己名字，而不是一个没有感情的数字！！！

他很愤怒，后果很严重，于是，我们要在查找表达式中给组命名。

**查找表达式** 改成这样：`\(?'cute1'\w+)@(?'cute2'\w+)\`

这样，第一组他的名字就是小可爱1(`${cute1}`)，第二组的名字就是小可爱2(`${cute2}`)。

**替换表达式**就是这样：`$cute2@cute1`

![rege2](https://cdn.ihewro.com/img/regex2.png)

如上图所示。

这就是第二种替换方法：**先使用括号分组再使用`?'name'`给每个组命名，然后使用`${name}`的方式调用每个组的匹配内容**。

注意：每个分组并不是全部都要命名，你可以命名分组中一个，其余的都不给命名。那么其余的组将从**序号1**开始自动分配组号，调用的方法同第一种方法。



## 替换整个表达式匹配的内容

其实我们总可以使用`$0`来使唤整个表达式匹配的内容，但是我们还可以用`$&`来调用。

你可以理解为整个表达式不仅是第0组，而且他的名字是`&`。

这在给整个匹配内容串末尾统一加一些内容时候非常有用。

见下面的例子：

![regex3](https://cdn.ihewro.com/img/regex3.png)

好啦，简单的正则表达式替换功能到这里就介绍完毕，但是这三种方法是最常用，最简单的入门功能。

如果有研究更多的兴趣，戳底部的文章来源链接~